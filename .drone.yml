---
# This file must be signed. You can do so with the `mage drone` command

kind: pipeline
type: docker
name:

platform:
  os: linux
  arch: amd64

steps:
  - name: build
    image: grafana/grafana-plugin-ci:1.9.5
    commands:
      - mage --keep -v build

  - name: lint
    image: golangci/golangci-lint:v1.64.2
    commands:
      - golangci-lint run ./...

  - name: test
    image: grafana/grafana-plugin-ci:1.9.5
    commands:
      - mage --keep -v test

  - name: vuln check
    image: golang:1.24.4
    depends_on: [clone]
    commands:
      - go install golang.org/x/vuln/cmd/govulncheck@latest
      - govulncheck ./...

---
kind: signature
hmac: bc1f2a1ec9536b60d53ff03858708ed520a239fac2b0871fdeeb67ae866d87ce

...
