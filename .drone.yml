---
# This file must be signed. You can do so with the `mage drone` command

kind: pipeline
type: docker
name:

platform:
  os: linux
  arch: amd64

steps:
  - name: build
    image: grafana/grafana-plugin-ci:1.9.5
    commands:
      - mage --keep -v build

  - name: lint
    image: grafana/grafana-plugin-ci:1.9.5
    commands:
      - mage --keep -v lint

  - name: test
    image: grafana/grafana-plugin-ci:1.9.5
    commands:
      - mage --keep -v test

  - name: vuln check
    image: golang:1.23
    depends_on: [clone]
    commands:
      - go install golang.org/x/vuln/cmd/govulncheck@latest
      - govulncheck ./...

---
kind: signature
hmac: 63fe601a5a95e4be215a92d3d8a823f861825052fd323a7039063a7fd5a348e1

...
